{"ts":1356108920229,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n/**\n * Module dependencies.\n */\n\nvar express = require('express')\n  , routes = require('./routes')\n  , fs = require('fs')\n  , User = require('./models/User.js');\n\nvar app = module.exports = express.createServer();\n\n// Configuration\n\napp.configure(function(){\n  app.set('views', __dirname + '/views');\n  app.set('view engine', 'jade');\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(__dirname + '/public'));\n});\n\napp.configure('development', function(){\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\n\napp.configure('production', function(){\n  app.use(express.errorHandler());\n});\n\n// Routes\n\napp.get('/', routes.index);\n\napp.get('/form', function(req, res) {\n   (1)\n   \n   fs.readFile('./form.html', function(error, content) {\n      (2)\n      \n      if (error) {\n          res.writeHead(500);\n          res.end();\n      }\n      else {\n          res.writeHead(200, { 'Content-Type': 'text/html'});\n          res.end(content, 'utf-8');\n      }\n   });\n   \n});\n\napp.get('/chart', function(req, res) {\n   (1)\n   \n   fs.readFile('./chart.html', function(error, content) {\n      (2)\n      \n      if (error) {\n          res.writeHead(500);\n          res.end();\n      }\n      else {\n          res.writeHead(200, { 'Content-Type': 'text/html'});\n          res.end(content, 'utf-8');\n      }\n   });\n   \n});\n\napp.post('/signup', function(req, res) {\n  var username = req.body.username;\n  var password = req.body.password;\n  var comments = req.body.comments;\n  User.addUser(username, password, comments, function(err, user) {\n    if (err) throw err;\n    res.redirect('/form');\n  });\n});\n\n\napp.listen(process.env.PORT);\nconsole.log(\"Express server listening on port %d in %s mode\", app.address().port, app.settings.env);\n"]],"start1":0,"start2":0,"length1":0,"length2":1812}]],"length":1812}
